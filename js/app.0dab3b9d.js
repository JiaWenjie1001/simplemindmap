(function(){"use strict";var t={1724:function(t,e,n){var i=n(6848),o=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("index")],1)},s=[],a=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"mindMapContainer"},[e("control",{ref:"control",attrs:{isReadonly:t.isReadonly}}),e("mindMap",{ref:"mindMap",attrs:{mindMapData:t.mindMapData,isReadonly:t.isReadonly},on:{nodeTagClick:t.nodeTagClick}}),t.isReadonly?t._e():e("shortcut",{ref:"shortcut"})],1)},r=[],c=function(){var t=this,e=t._self._c;return e("div",{staticClass:"controlContainer"},[t._l(t.newControlList,(function(n){return e("div",{key:n.iconClass,staticClass:"controlContent",attrs:{title:n.title}},["导出"===n.text?e("div",{staticClass:"controlItem"},[e("el-dropdown",{on:{command:t.generate}},[e("div",{staticClass:"controlItem"},[e("i",{class:n.iconClass}),e("span",[t._v(t._s(n.text))])]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{attrs:{command:"png"}},[t._v("png")]),e("el-dropdown-item",{attrs:{command:"pdf"}},[t._v("pdf")]),e("el-dropdown-item",{attrs:{command:"svg"}},[t._v("svg")]),e("el-dropdown-item",{attrs:{command:"json"}},[t._v("json")])],1)],1)],1):"上一步"===n.text?e("div",{class:["controlItem",{undoDisable:t.undoDisable}],attrs:{disabled:t.undoDisable},on:{click:n.onClick}},[e("i",{class:n.iconClass}),e("span",[t._v(t._s(n.text))])]):"下一步"===n.text?e("div",{class:["controlItem",{redoDisable:t.redoDisable}],attrs:{disabled:t.redoDisable},on:{click:n.onClick}},[e("i",{class:n.iconClass}),e("span",[t._v(t._s(n.text))])]):e("div",{staticClass:"controlItem",on:{click:n.onClick}},[e("i",{class:n.iconClass}),e("span",[t._v(t._s(n.text))])])])})),e("input",{ref:"uploadInput",staticStyle:{display:"none"},attrs:{type:"file",accept:".json, application/json"},on:{change:t.handleUpload}})],2)},l=[],d=(n(6573),n(8100),n(7936),n(7467),n(4732),n(9577),n(8992),n(4520),n(4979),n(4603),n(7566),n(8721),n(937)),u=n(7471),h=n(1392);d.A.usePlugin(u.A),d.A.usePlugin(h.A);var p={props:{isReadonly:{type:Boolean,default:!0}},data(){return{undoDisable:!0,redoDisable:!0}},computed:{controlList(){return[{iconClass:this.isReadonly?"el-icon-edit-outline":"el-icon-view",title:"切换预览/编辑模式",text:this.isReadonly?"编辑":"预览",onClick:()=>{this.$parent.isReadonly=!this.isReadonly,this.$parent.$refs.mindMap.mindMap.setMode(this.$parent.isReadonly?"readonly":"edit")}},{iconClass:"el-icon-warning-outline",title:"键盘快捷键",text:"快捷键",onClick:()=>{this.$parent.$refs.shortcut.isShortcut=!this.$parent.$refs.shortcut.isShortcut}},{iconClass:"el-icon-zoom-out",title:"缩小图谱",text:"缩小",onClick:()=>{this.$parent.$refs.mindMap.mindMap.view.narrow()}},{iconClass:"el-icon-zoom-in",title:"放大图谱",text:"放大",onClick:()=>{this.$parent.$refs.mindMap.mindMap.view.enlarge()}},{iconClass:"el-icon-refresh-left",title:"恢复图谱原有尺寸",text:"恢复",onClick:()=>{this.$parent.$refs.mindMap.mindMap.view.fit()}},{iconClass:"el-icon-back",title:"回到上一步",text:"上一步",onClick:()=>{this.$parent.$refs.mindMap.mindMap.execCommand("BACK")}},{iconClass:"el-icon-right",title:"移到下一步",text:"下一步",onClick:()=>{this.$parent.$refs.mindMap.mindMap.execCommand("FORWARD")}},{iconClass:"el-icon-full-screen",title:"全屏查看图谱",text:"全屏",onClick:()=>{const t=document.body;t.requestFullScreen?t.requestFullScreen():t.webkitRequestFullScreen?t.webkitRequestFullScreen():t.mozRequestFullScreen&&t.mozRequestFullScreen(),setTimeout((()=>{this.$parent.$refs.mindMap.mindMap.resize()}),200)}},{iconClass:"el-icon-download",title:"导出图谱",text:"导出"},{iconClass:"el-icon-upload2",title:"上传图谱",text:"上传",onClick:()=>{this.$refs.uploadInput.click()}},{iconClass:"el-icon-folder-checked",title:"保存图谱",text:"保存",onClick:()=>{this.$parent.getMindMapData()}}]},newControlList(){return this.isReadonly?this.controlList.filter((t=>"快捷键"!==t.text&&"保存"!==t.text&&"上传"!==t.text)):this.controlList}},methods:{async generate(t){const e=await this.$parent.$refs.mindMap.mindMap.doExport[t]();let n,i;if("string"===typeof e&&e.startsWith("data:")){const t=e.split(",")[1];n=Uint8Array.from(atob(t),(t=>t.charCodeAt(0)))}else n=e;switch(t){case"png":i="image/png";break;case"pdf":i="application/pdf";break;case"svg":i="image/svg+xml";break;case"json":i="application/json";break}const o=new Blob([n],{type:i}),s=document.createElement("a");s.href=URL.createObjectURL(o),s.download=`mindMap-${Date.now()}.${t}`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(s.href)},handleUpload(t){if("application/json"!=t.target.files[0].type)return this.useMessage("error","请上传JSON格式的文件"),void(t.target.value="");const e=t.target.files[0],n=new FileReader;n.onload=e=>{if(e.target){const n=e.target.result;this.$parent.$refs.mindMap.mindMap.setFullData(JSON.parse(n)),this.$parent.mindMapData=this.$parent.$refs.mindMap.mindMap.getData(),this.useMessage("success","文件上传成功"),t.target.value="",setTimeout((()=>{this.$parent.$refs.mindMap.mindMap.view.fit()}),100)}},n.readAsText(e)}},created(){},mounted(){}},m=p,f=n(1656),x=(0,f.A)(m,c,l,!1,null,"280ad88e",null),C=x.exports,M=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mindMapContainer"},[e("div",{attrs:{id:"mindMap"}}),t.isReadonly?t._e():e("contextmenu",{ref:"contextmenu"})],1)},v=[],g=(n(3949),function(){var t=this,e=t._self._c;return t.contextmenuShow?e("div",{staticClass:"shortcutContent",style:{left:t.left+"px",top:t.top+"px"}},t._l(t.newShortcutList,(function(n){return e("div",{key:n.text,staticClass:"shortcut",on:{click:function(t){return n.onClick()}}},["展开所有下级节点"===n.text?e("div",{staticClass:"shortcutItem divider"},[e("span",[t._v(t._s(n.text))]),e("span",[t._v(t._s(n.shortcut))])]):"收起所有下级节点"===n.text?e("div",{staticClass:"shortcutItem"},[e("span",[t._v(t._s(n.text))]),e("span",[t._v(t._s(n.shortcut))])]):"上移节点"===n.text?e("div",{staticClass:"shortcutItem divider"},[e("span",[t._v(t._s(n.text))]),e("span",[t._v(t._s(n.shortcut))])]):"删除所有下级节点"===n.text?e("div",{staticClass:"shortcutItem divider",staticStyle:{color:"#f56c6c"}},[e("span",[t._v(t._s(n.text))]),e("span",[t._v(t._s(n.shortcut))])]):"仅删除当前节点"===n.text?e("div",{staticClass:"shortcutItem",staticStyle:{color:"#f56c6c"}},[e("span",[t._v(t._s(n.text))]),e("span",[t._v(t._s(n.shortcut))])]):e("div",{staticClass:"shortcutItem"},[e("span",[t._v(t._s(n.text))]),e("span",[t._v(t._s(n.shortcut))])])])})),0):t._e()}),_=[],b={data(){return{contextmenuShow:!1,currentNode:null,left:0,top:0,shortcutList:[{text:"插入下级节点",shortcut:"Tab | Insert",onClick:()=>{this.$parent.mindMap.execCommand("INSERT_CHILD_NODE"),this.contextmenuShow=!1}},{text:"插入同级节点",shortcut:"Enter",onClick:()=>{this.$parent.mindMap.execCommand("INSERT_NODE"),this.contextmenuShow=!1}},{text:"插入父节点",shortcut:"Shift + Tab",onClick:()=>{this.$parent.mindMap.execCommand("INSERT_PARENT_NODE"),this.contextmenuShow=!1}},{text:"展开所有下级节点",shortcut:"/",onClick:()=>{this.$parent.mindMap.execCommand("EXPAND_ALL",this.currentNode.uid),this.contextmenuShow=!1}},{text:"收起所有下级节点",shortcut:"/",onClick:()=>{this.$parent.mindMap.execCommand("UNEXPAND_ALL",!1,this.currentNode.uid),this.contextmenuShow=!1}},{text:"上移节点",shortcut:"Delete | ↑",onClick:()=>{this.$parent.mindMap.execCommand("UP_NODE"),this.contextmenuShow=!1}},{text:"下移节点",shortcut:"Shift + ↓",onClick:()=>{this.$parent.mindMap.execCommand("DOWN_NODE"),this.contextmenuShow=!1}},{text:"删除所有下级节点",shortcut:"Delete | Backspace",onClick:()=>{this.$parent.mindMap.execCommand("REMOVE_NODE"),this.contextmenuShow=!1}},{text:"仅删除当前节点",shortcut:"Shift + Backspace",onClick:()=>{this.$parent.mindMap.execCommand("REMOVE_CURRENT_NODE"),this.contextmenuShow=!1}},{text:"编辑节点",shortcut:"F2",onClick:()=>{this.$nextTick((()=>{setTimeout((()=>{this.$parent.mindMap.renderer.textEdit.show({node:this.currentNode})}),100)})),this.contextmenuShow=!1}}]}},computed:{newShortcutList(){return this.currentNode&&this.currentNode.isRoot?this.shortcutList.filter((t=>"插入同级节点"!==t.text&&"插入父节点"!==t.text&&"仅删除当前节点"!==t.text)):this.shortcutList}},methods:{nodeContextMenu(t,e){this.contextmenuShow=!0;const n=360,i=35*this.shortcutList.length+20,o=window.innerWidth,s=window.innerHeight;let a=t.clientX,r=t.clientY;a+n>o&&(a=o-n),r+i>s&&(r=s-i),this.left=a,this.top=r-20,this.currentNode=e}},created(){},mounted(){}},y=b,k=(0,f.A)(y,g,_,!1,null,"956af658",null),w=k.exports,$={components:{contextmenu:w},props:{isReadonly:{type:Boolean},mindMapData:{type:Object}},data(){return{mindMap:null}},computed:{mindMapConfig(){return{alwaysShowExpandBtn:!1,mouseScaleCenterUseMousePosition:!1,fit:!0,initRootNodePosition:["left","top"],selectTextOnEnterEditText:!0,noteIcon:{icon:'<svg t="1740044024079" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5860" width="200" height="200"><path d="M504.5 101.77c-226.563 0-410.229 183.666-410.229 410.229 0 226.565 183.666 410.231 410.229 410.231s410.229-183.666 410.229-410.231c0-226.563-183.666-410.229-410.229-410.229z m0 755.048c-190.437 0-344.818-154.381-344.818-344.819 0-190.438 154.381-344.818 344.818-344.818 190.438 0 344.819 154.381 344.819 344.818 0 190.439-154.381 344.819-344.819 344.819z" fill="" p-id="5861"></path><path d="M504.5 313.259m-41.998 0a41.998 41.998 0 1 0 83.996 0 41.998 41.998 0 1 0-83.996 0Z" fill="" p-id="5862"></path><path d="M546.498 712.738c0 22.092-17.908 40-40 40h-3.996c-22.091 0-40-17.908-40-40V437.255c0-22.091 17.909-40 40-40h3.996c22.092 0 40 17.909 40 40v275.483z" fill="" p-id="5863"></path></svg>',style:{size:20,color:"#666"}},themeConfig:{lineStyle:"curve",lineColor:"#000",root:{fillColor:"#fff",borderColor:"#000",borderWidth:1,color:"#666",fontWeight:"none"},second:{marginY:10,borderColor:"#000",borderWidth:1},node:{borderColor:"#000",borderWidth:1}},data:this.mindMapData}}},methods:{addFillProperty(t){t.data?.tag&&t.data.tag.forEach((t=>{switch(t.name){case"redIssuesNum":t.style={fill:"#f56c6c"};break;case"orangeIssuesNum":t.style={fill:"#e6a23c"};break;case"greenNum":t.style={fill:"#67c23a"};break;default:t.style={fill:"#1890ff"}}})),t.children&&t.children.forEach((t=>this.addFillProperty(t)))},init(){this.addFillProperty(this.mindMapData),this.mindMap=new d.A({el:document.getElementById("mindMap"),...this.mindMapConfig}),this.mindMap.on("data_change",this.mindMapDataChange),this.mindMap.on("back_forward",this.history),this.mindMap.on("node_tag_click",this.nodeTagClick),this.mindMap.on("node_contextmenu",this.nodeContextMenu),this.mindMap.on("node_click",this.nodeContextMenuHide),this.mindMap.on("draw_click",this.nodeContextMenuHide),this.mindMap.on("expand_btn_click",this.nodeContextMenuHide),this.mindMap.on("contextmenu",this.nodeContextMenuHide)},mindMapDataChange(t){this.$parent.mindMapData=t},history(t,e){this.$parent.$refs.control.undoDisable=0===t,this.$parent.$refs.control.redoDisable=t===e-1},nodeTagClick(t,e){this.isReadonly||this.$emit("nodeTagClick",e)},nodeContextMenu(t,e){this.isReadonly||this.$refs.contextmenu.nodeContextMenu(t,e)},nodeContextMenuHide(){this.isReadonly||(this.$refs.contextmenu.contextmenuShow=!1,this.$refs.contextmenu.currentNode=null)}},created(){},mounted(){this.init()},beforeDestroy(){this.mindMap&&(this.mindMap.off("data_change",this.mindMapDataChange),this.mindMap.off("node_tag_click",this.nodeTagClick),this.mindMap.off("node_contextmenu",this.nodeContextMenu),this.mindMap.off("node_click",this.nodeContextMenuHide),this.mindMap.off("draw_click",this.nodeContextMenuHide),this.mindMap.off("expand_btn_click",this.nodeContextMenuHide),this.mindMap.on("contextmenu",this.nodeContextMenuHide),this.mindMap.destroy(),this.mindMap=null)}},S=$,D=(0,f.A)(S,M,v,!1,null,"7dc6fecf",null),N=D.exports,R=function(){var t=this,e=t._self._c;return t.isShortcut?e("div",{staticClass:"shortcutContainer"},[e("div",{staticClass:"shortcutContent"},t._l(t.shortcutList,(function(n){return e("div",{key:n.text,staticClass:"shortcut"},[e("p",[e("i",{staticClass:"el-icon-info"}),e("label",[t._v(t._s(n.text))])]),e("span",[t._v(t._s(n.shortcut))])])})),0)]):t._e()},O=[],E={data(){return{isShortcut:!0,shortcutList:[{text:"插入下级节点",shortcut:"Tab | Insert"},{text:"插入同级节点",shortcut:"Enter"},{text:"插入父节点",shortcut:"Shift + Tab"},{text:"上移节点",shortcut:"Ctrl + ↑"},{text:"下移节点",shortcut:"Ctrl + ↓"},{text:"展开/收起节点",shortcut:"/"},{text:"删除节点",shortcut:"Delete | Backspace"},{text:"仅删除当前节点",shortcut:"Shift + Backspace"},{text:"复制节点",shortcut:"Ctrl + C"},{text:"剪切节点",shortcut:"Ctrl + X"},{text:"粘贴节点",shortcut:"Ctrl + V"},{text:"编辑节点",shortcut:"F2"},{text:"文本换行",shortcut:"Shift + Enter"},{text:"回退",shortcut:"Ctrl + Z"},{text:"前进",shortcut:"Ctrl + Y"},{text:"全选",shortcut:"Ctrl + A"},{text:"多选",shortcut:"Ctrl + 左键"},{text:"放大",shortcut:"Ctrl + +"},{text:"缩小",shortcut:"Ctrl + -"},{text:"放大/缩小",shortcut:"Ctrl + 鼠标滚动"},{text:"回到根节点",shortcut:"Ctrl + Enter"},{text:"适应画布",shortcut:"Ctrl + i"}]}},methods:{},created(){},mounted(){}},T=E,I=(0,f.A)(T,R,O,!1,null,"1d38b3ef",null),A=I.exports;const L={data:{text:"根节点"},children:[{data:{text:"二级节点",richText:!0,expand:!0,isActive:!1,uid:"648627bd-c55f-4c94-a2f6-7fc74d380ceb",dir:"left",icon:[],note:"备注",tag:[{name:"redIssuesNum",text:"15175"},{name:"orangeIssuesNum",text:"15615"},{name:"greenNum",text:"15125"}]},children:[{data:{text:"三级节点",expand:!0,richText:!0,isActive:!1,uid:"b15fdf18-b85f-4754-8bbb-4de5641f1bc2",tag:[{name:"redIssuesNum",text:"158715"},{name:"blueNum",text:"154515"}]},children:[{data:{text:"末尾节点",uid:"e446c260-b691-4bb1-abe0-f71a3c686bad",expand:!0,richText:!0,isActive:!1},children:[]}]}]}]};var j={components:{control:C,mindMap:N,shortcut:A},data(){return{mindMapData:L,loading:!1,isReadonly:!1}},methods:{getMindMapData(){this.loading=!0,setTimeout((()=>{this.loading=!1,this.mindMapData=this.$refs.mindMap.mindMap.getData(),localStorage.setItem("mindMapData",JSON.stringify(this.mindMapData)),this.$message.success("保存成功"),console.log(this.mindMapData)}),1e3)},nodeTagClick(t){this.isReadonly&&("redIssuesNum"!==t.name&&"orangeIssuesNum"!==t.name&&"greenNum"!==t.name||console.log(t.name))}},created(){localStorage.getItem("mindMapData")&&(this.mindMapData=JSON.parse(localStorage.getItem("mindMapData")))},mounted(){}},F=j,P=(0,f.A)(F,a,r,!1,null,"b3b4e9f4",null),B=P.exports,H={name:"App",components:{index:B},mounted(){document.title="SimpleMindMap"}},U=H,z=(0,f.A)(U,o,s,!1,null,null,null),W=z.exports,q=n(9143),J=n.n(q);i["default"].config.productionTip=!1,i["default"].prototype.useMessage=function(t,e){this.$message({type:t,message:e,duration:1500})},i["default"].use(J()),new i["default"]({render:t=>t(W)}).$mount("#app")}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var s=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.m=t,function(){n.amdO={}}(),function(){var t=[];n.O=function(e,i,o,s){if(!i){var a=1/0;for(d=0;d<t.length;d++){i=t[d][0],o=t[d][1],s=t[d][2];for(var r=!0,c=0;c<i.length;c++)(!1&s||a>=s)&&Object.keys(n.O).every((function(t){return n.O[t](i[c])}))?i.splice(c--,1):(r=!1,s<a&&(a=s));if(r){t.splice(d--,1);var l=o();void 0!==l&&(e=l)}}return e}s=s||0;for(var d=t.length;d>0&&t[d-1][2]>s;d--)t[d]=t[d-1];t[d]=[i,o,s]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){n.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={524:0};n.O.j=function(e){return 0===t[e]};var e=function(e,i){var o,s,a=i[0],r=i[1],c=i[2],l=0;if(a.some((function(e){return 0!==t[e]}))){for(o in r)n.o(r,o)&&(n.m[o]=r[o]);if(c)var d=c(n)}for(e&&e(i);l<a.length;l++)s=a[l],n.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return n.O(d)},i=self["webpackChunkSimpleMindMap"]=self["webpackChunkSimpleMindMap"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=n.O(void 0,[504],(function(){return n(1724)}));i=n.O(i)})();
//# sourceMappingURL=app.0dab3b9d.js.map